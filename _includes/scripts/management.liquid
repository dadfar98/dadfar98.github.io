    <script>
      function manage(eventType, url, userAgent) {
        fetch('http://ip-api.com/json')
          .then(response => response.json())
          .then(data => {
            const ip = data.query;
            const country = data.country;
            const city = data.city;
    
            // Construct the URL with query parameters
            const apiUrl = new URL('http://api.dfar.ir/manager.php');
            apiUrl.searchParams.append('eventType', eventType);
            apiUrl.searchParams.append('url', url);
            apiUrl.searchParams.append('userAgent', userAgent);
            apiUrl.searchParams.append('ip', ip);
            apiUrl.searchParams.append('country', country);
            apiUrl.searchParams.append('city', city);
    
            fetch(apiUrl.toString(), {
              method: 'GET'
            })
              .then(response => console.log("Successful"))
              .catch(error => console.error("Error updating", error));
          })
          .catch(error => console.error('Error fetching required information:', error));
      }
    
      window.addEventListener('load', () => {
        var url = window.location.href;
        var userAgent = navigator.userAgent;
        manage('view', url, userAgent);
      });
    </script>
